import{u as z,A as E,C as O,B as R,q as U}from"./DhKMbT5T.js";import{D as H,S as J,X as K,ac as X,u as Y,a2 as G,J as C,o as Q,I as W,c as L,f as l,g as i,j as e,i as d,h as B,w as D,n as s,R as t,C as Z,ad as ee,ae as te,t as c,F as j,V as A,Y as re,B as M}from"./CROkfFJm.js";import{u as se}from"./CcQFqvco.js";/**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=H("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),oe={class:"min-h-screen py-10 sm:py-14"},ne={class:"container mx-auto max-w-6xl px-4"},le={class:"mb-6 flex items-center justify-between"},ie={class:"flex items-center gap-4 sm:gap-6"},de={class:"p-[2px] rounded-full bg-gradient-to-br from-[var(--gradient-brand-from)] to-[var(--gradient-brand-to)]"},ce={class:"mb-10"},ge={class:"flex items-center justify-between mb-4"},fe={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6"},ue={class:"relative h-40 rounded-xl overflow-hidden"},me=["src","alt"],xe={class:"p-3.5"},be={class:"flex items-center gap-2"},ye=["onClick"],pe={class:"flex items-center justify-between mb-4"},he={key:1,class:"space-y-3"},ve={class:"flex items-center justify-between mb-2"},De={__name:"profile",async setup(_e){let m,p;const r=J({selector:"html",attribute:"class",valueDark:"dark",valueLight:"light",storageKey:"vueuse-dark"}),S=K(),{user:u,logout:q}=X(),g=z(),{$supabase:N}=Y(),{data:V}=([m,p]=G(()=>se("profile-posts",()=>U("blog").order("date","DESC").all())),m=await m,p(),m);C(V,o=>o&&g.setAllPosts(o),{immediate:!0}),Q(()=>{g.initBookmarks(),g.initDarkMode(r.value)});const b=W(()=>{var o;return((o=g.allPosts)==null?void 0:o.filter(a=>g.isBookmarked(a)))||[]}),F=o=>{g.toggleBookmark(o),S.success("از نشان‌ها حذف شد")},y=L(!1),f=L([]);C(()=>{var o;return(o=u.value)==null?void 0:o.email},async()=>{var o;if(!((o=u.value)!=null&&o.email)){f.value=[];return}y.value=!0;try{const{data:a,error:x}=await N.from("comments").select("*").eq("email",u.value.email).order("created_at",{ascending:!1});if(x)throw x;f.value=a||[]}catch{f.value=[]}finally{y.value=!1}},{immediate:!0});const I=o=>new Intl.DateTimeFormat("fa-IR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(o));return(o,a)=>{var w;const x=E,h=Z,P=ee,T=te,v=O,_=R,$=ae;return i(),l("main",oe,[e("div",ne,[e("div",le,[d(h,{to:"/blog",class:s(["inline-flex items-center gap-2 px-3 py-2 rounded-xl border transition-colors",t(r)?"border-[#ffffff15] text-gray-200 hover:bg-white/5":"border-gray-200 text-gray-700 hover:bg-gray-50"])},{default:D(()=>[d(x,{class:"w-4 h-4"}),a[1]||(a[1]=e("span",null,"بازگشت",-1))]),_:1},8,["class"]),t(u)?(i(),l("button",{key:0,onClick:a[0]||(a[0]=n=>t(q)()),class:s(["inline-flex items-center gap-2 px-3 py-2 rounded-xl border transition-colors",t(r)?"border-[#ffffff15] text-gray-200 hover:bg-white/5":"border-gray-200 text-gray-700 hover:bg-gray-50"])},[d(P,{class:"w-4 h-4"}),a[2]||(a[2]=e("span",null,"خروج",-1))],2)):B("",!0)]),e("section",{class:s(["rounded-2xl p-6 sm:p-8 mb-8 backdrop-blur-xl shadow-xl ring-1",t(r)?"bg-[#0f0f1d]/70 ring-white/5":"bg-white/70 ring-black/5"])},[e("div",ie,[e("div",de,[e("div",{class:s(["w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center",t(r)?"bg-white/5":"bg-gray-100"])},[d(T,{class:s(["w-7 h-7",t(r)?"text-gray-300":"text-gray-600"])},null,8,["class"])],2)]),e("div",null,[e("h1",{class:s(["text-xl sm:text-2xl font-extrabold",t(r)?"text-gray-100":"text-gray-800"])},"پروفایل",2),e("p",{class:s(["text-sm mt-1",t(r)?"text-gray-400":"text-gray-600"])},c((w=t(u))==null?void 0:w.email),3),a[3]||(a[3]=e("div",{class:"mt-3 h-1 w-16 rounded-full bg-gradient-to-r from-[var(--gradient-brand-from)] to-[var(--gradient-brand-to)]"},null,-1))])])],2),e("section",ce,[e("div",ge,[e("h2",{class:s(["text-lg sm:text-xl font-bold",t(r)?"text-gray-100":"text-gray-800"])}," نشان‌های من ",2),e("div",{class:s(["text-sm",t(r)?"text-gray-400":"text-gray-500"])},c(t(b).length)+" مورد",3)]),t(b).length?(i(),l("div",fe,[(i(!0),l(j,null,A(t(b),n=>(i(),l("article",{key:n._path,class:s(["group overflow-hidden rounded-2xl border transition-all duration-300 hover:shadow-xl hover:-translate-y-0.5",t(r)?"bg-[#0f0f1d] border-[#ffffff12] hover:border-[#7091F5]/40":"bg-white border-gray-200 hover:border-[#7091F5]"])},[d(h,{to:n.path,class:"block"},{default:D(()=>{var k;return[e("div",ue,[(k=n.meta)!=null&&k.image?(i(),l("img",{key:0,src:n.meta.image,alt:n.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-[1.03]"},null,8,me)):B("",!0),a[4]||(a[4]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]),e("div",xe,[e("h3",{class:s(["font-bold line-clamp-2 mb-2 transition-colors",t(r)?"text-gray-100 group-hover:text-[var(--gradient-brand-to)]":"text-gray-800 group-hover:text-[var(--gradient-brand-from)]"])},c(n.title),3),e("div",{class:s(["flex items-center justify-between text-xs",t(r)?"text-gray-400":"text-gray-500"])},[e("div",be,[d(v,{class:"w-4 h-4"}),e("span",null,c(n.date),1)]),e("button",{type:"button",onClick:re(ke=>F(n),["prevent"]),class:s(["inline-flex items-center gap-1 px-2 py-1 rounded-lg border text-xs transition-colors",t(r)?"border-[#ffffff20] hover:bg-white/5":"border-gray-200 hover:bg-gray-50"])},[d(_,{class:"w-4 h-4"}),a[5]||(a[5]=e("span",null,"حذف",-1))],10,ye)],2)])]}),_:2},1032,["to"])],2))),128))])):(i(),l("div",{key:1,class:s(["flex flex-col items-center justify-center p-10 rounded-2xl border backdrop-blur",t(r)?"bg-[#0f0f1d]/60 border-[#ffffff10] text-gray-400":"bg-white/70 border-gray-200 text-gray-500"])},[d(_,{class:"w-10 h-10 mb-2"}),a[6]||(a[6]=M(" هیچ پستی نشان نشده است "))],2))]),e("section",null,[e("div",pe,[e("h2",{class:s(["text-lg sm:text-xl font-bold",t(r)?"text-gray-100":"text-gray-800"])},"نظرهای من",2),e("div",{class:s(["text-sm",t(r)?"text-gray-400":"text-gray-500"])},c(t(f).length)+" نظر",3)]),t(y)?(i(),l("div",{key:0,class:s(["text-center py-8",t(r)?"text-gray-400":"text-gray-500"])},"در حال بارگذاری...",2)):t(f).length?(i(),l("div",he,[(i(!0),l(j,null,A(t(f),n=>(i(),l("div",{key:n.id,class:s(["relative p-4 rounded-xl border transition-colors",t(r)?"bg-[#0f0f1d] border-[#ffffff12]":"bg-white border-gray-200"])},[e("div",{class:s(["absolute right-3 top-0 bottom-0 border-r-2",t(r)?"border-[var(--gradient-brand-to)]/30":"border-[var(--gradient-brand-from)]/30"])},null,2),e("div",ve,[e("div",{class:s(["flex items-center gap-2 text-xs",t(r)?"text-gray-400":"text-gray-500"])},[d(v,{class:"w-4 h-4"}),e("span",{class:s(["px-2 py-0.5 rounded-full",t(r)?"bg-white/10 text-gray-300":"bg-gray-100 text-gray-600"])},c(I(n.created_at)),3)],2),e("div",{class:s(["text-xs",t(r)?"text-gray-400":"text-gray-500"])},"پست: "+c(n.post_id),3)]),e("p",{class:s(["pr-5 leading-7",t(r)?"text-gray-300":"text-gray-700"])},c(n.content),3)],2))),128))])):(i(),l("div",{key:2,class:s(["flex flex-col items-center justify-center p-10 rounded-2xl border backdrop-blur",t(r)?"bg-[#0f0f1d]/60 border-[#ffffff10] text-gray-400":"bg-white/70 border-gray-200 text-gray-500"])},[d($,{class:"w-10 h-10 mb-2"}),a[7]||(a[7]=M(" نظری ثبت نکرده‌اید "))],2))])])])}}};export{De as default};
