import{u as T,A as U,C as $,B as E,q as O}from"./CzpztT_5.js";import{D as R,W as z,X as H,u as J,a2 as W,J as C,o as X,I as Y,c as L,f as a,g as o,j as t,i as n,h as B,w as y,C as G,R as d,ae as K,af as Q,t as l,F as j,U as A,Y as Z,B as p}from"./giJZFj6k.js";import{u as tt}from"./CtUCgRtK.js";/**
 * @license lucide-vue-next v0.540.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=R("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),rt={class:"min-h-screen py-10 sm:py-14"},st={class:"container mx-auto max-w-6xl px-4"},at={class:"mb-6 flex items-center justify-between"},ot={class:"rounded-2xl p-6 sm:p-8 mb-8 backdrop-blur-xl shadow-xl ring-1 bg-white/70 ring-black/5 dark:bg-[#0f0f1d]/70 dark:ring-white/5"},nt={class:"flex items-center gap-4 sm:gap-6"},dt={class:"p-[2px] rounded-full bg-gradient-to-br from-[var(--gradient-brand-from)] to-[var(--gradient-brand-to)]"},lt={class:"w-14 h-14 sm:w-16 sm:h-16 rounded-full flex items-center justify-center bg-gray-100 dark:bg-white/5"},it={class:"text-sm mt-1 text-gray-600 dark:text-gray-400"},ct={class:"mb-10"},gt={class:"flex items-center justify-between mb-4"},ft={class:"text-sm text-gray-500 dark:text-gray-400"},mt={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6"},ut={class:"relative h-40 rounded-xl overflow-hidden"},xt=["src","alt"],bt={class:"p-3.5"},yt={class:"font-bold line-clamp-2 mb-2 transition-colors text-gray-800 group-hover:text-[var(--gradient-brand-from)] dark:text-gray-100 dark:group-hover:text-[var(--gradient-brand-to)]"},pt={class:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"},ht={class:"flex items-center gap-2"},kt=["onClick"],_t={key:1,class:"flex flex-col items-center justify-center p-10 rounded-2xl border backdrop-blur bg-white/70 border-gray-200 text-gray-500 dark:bg-[#0f0f1d]/60 dark:border-[#ffffff10] dark:text-gray-400"},vt={class:"flex items-center justify-between mb-4"},wt={class:"text-sm text-gray-500 dark:text-gray-400"},Ct={key:0,class:"text-center py-8 text-gray-500 dark:text-gray-400"},Lt={key:1,class:"space-y-3"},Bt={class:"flex items-center justify-between mb-2"},jt={class:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400"},At={class:"px-2 py-0.5 rounded-full bg-gray-100 text-gray-600 dark:bg-white/10 dark:text-gray-300"},Dt={class:"flex items-center gap-2"},Mt={class:"pr-5 leading-7 text-gray-700 dark:text-gray-300"},qt={key:2,class:"flex flex-col items-center justify-center p-10 rounded-2xl border backdrop-blur bg-white/70 border-gray-200 text-gray-500 dark:bg-[#0f0f1d]/60 dark:border-[#ffffff10] dark:text-gray-400"},Tt={__name:"profile",async setup(Nt){let f,h;const D=z(),{user:c,logout:M}=H(),g=T(),{$supabase:q}=J(),{data:N}=([f,h]=W(()=>tt("profile-posts",()=>O("blog").order("date","DESC").all())),f=await f,h(),f);C(N,r=>r&&g.setAllPosts(r),{immediate:!0}),X(()=>{g.initBookmarks()});const u=Y(()=>{var r;return((r=g.allPosts)==null?void 0:r.filter(e=>g.isBookmarked(e)))||[]}),S=r=>{g.toggleBookmark(r),D.success("از نشان‌ها حذف شد")},x=L(!1),i=L([]);C(()=>{var r;return(r=c.value)==null?void 0:r.email},async()=>{var r;if(!((r=c.value)!=null&&r.email)){i.value=[];return}x.value=!0;try{const{data:e,error:m}=await q.from("comments").select("*").eq("email",c.value.email).order("created_at",{ascending:!1});if(m)throw m;i.value=e||[]}catch{i.value=[]}finally{x.value=!1}},{immediate:!0});const F=r=>new Intl.DateTimeFormat("fa-IR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(new Date(r));return(r,e)=>{var v;const m=U,b=G,V=K,I=Q,k=$,_=E,P=et;return o(),a("main",rt,[t("div",st,[t("div",at,[n(b,{to:"/blog",class:"inline-flex items-center gap-2 px-3 py-2 rounded-xl border transition-colors border-gray-200 text-gray-700 hover:bg-gray-50 dark:border-[#ffffff15] dark:text-gray-200 dark:hover:bg-white/5"},{default:y(()=>[n(m,{class:"w-4 h-4"}),e[1]||(e[1]=t("span",null,"بازگشت",-1))]),_:1}),d(c)?(o(),a("button",{key:0,onClick:e[0]||(e[0]=s=>d(M)()),class:"inline-flex items-center gap-2 px-3 py-2 rounded-xl border transition-colors border-gray-200 text-gray-700 hover:bg-gray-50 dark:border-[#ffffff15] dark:text-gray-200 dark:hover:bg-white/5"},[n(V,{class:"w-4 h-4"}),e[2]||(e[2]=t("span",null,"خروج",-1))])):B("",!0)]),t("section",ot,[t("div",nt,[t("div",dt,[t("div",lt,[n(I,{class:"w-7 h-7 text-gray-600 dark:text-gray-300"})])]),t("div",null,[e[3]||(e[3]=t("h1",{class:"text-xl sm:text-2xl font-extrabold text-gray-800 dark:text-gray-100"},"پروفایل",-1)),t("p",it,l((v=d(c))==null?void 0:v.email),1),e[4]||(e[4]=t("div",{class:"mt-3 h-1 w-16 rounded-full bg-gradient-to-r from-[var(--gradient-brand-from)] to-[var(--gradient-brand-to)]"},null,-1))])])]),t("section",ct,[t("div",gt,[e[5]||(e[5]=t("h2",{class:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100"}," نشان‌های من ",-1)),t("div",ft,l(d(u).length)+" مورد",1)]),d(u).length?(o(),a("div",mt,[(o(!0),a(j,null,A(d(u),s=>(o(),a("article",{key:s._path,class:"group overflow-hidden rounded-2xl border transition-all duration-300 hover:shadow-xl hover:-translate-y-0.5 bg-white border-gray-200 hover:border-[#7091F5] dark:bg-[#0f0f1d] dark:border-[#ffffff12] dark:hover:border-[#7091F5]/40"},[n(b,{to:s.path,class:"block"},{default:y(()=>{var w;return[t("div",ut,[(w=s.meta)!=null&&w.image?(o(),a("img",{key:0,src:s.meta.image,alt:s.title,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-[1.03]"},null,8,xt)):B("",!0),e[6]||(e[6]=t("div",{class:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"},null,-1))]),t("div",bt,[t("h3",yt,l(s.title),1),t("div",pt,[t("div",ht,[n(k,{class:"w-4 h-4"}),t("span",null,l(s.date),1)]),t("button",{type:"button",onClick:Z(Ft=>S(s),["prevent"]),class:"inline-flex items-center gap-1 px-2 py-1 rounded-lg border text-xs transition-colors border-gray-200 hover:bg-gray-50 dark:border-[#ffffff20] dark:hover:bg-white/5"},[n(_,{class:"w-4 h-4"}),e[7]||(e[7]=t("span",null,"حذف",-1))],8,kt)])])]}),_:2},1032,["to"])]))),128))])):(o(),a("div",_t,[n(_,{class:"w-10 h-10 mb-2"}),e[8]||(e[8]=p(" هیچ پستی نشان نشده است "))]))]),t("section",null,[t("div",vt,[e[9]||(e[9]=t("h2",{class:"text-lg sm:text-xl font-bold text-gray-800 dark:text-gray-100"},"نظرهای من",-1)),t("div",wt,l(d(i).length)+" نظر",1)]),d(x)?(o(),a("div",Ct,"در حال بارگذاری...")):d(i).length?(o(),a("div",Lt,[(o(!0),a(j,null,A(d(i),s=>(o(),a("div",{key:s.id,class:"relative p-4 rounded-xl border transition-colors bg-white border-gray-200 dark:bg-[#0f0f1d] dark:border-[#ffffff12]"},[e[11]||(e[11]=t("div",{class:"absolute right-3 top-0 bottom-0 border-r-2 border-[var(--gradient-brand-from)]/30 dark:border-[var(--gradient-brand-to)]/30"},null,-1)),t("div",Bt,[t("div",jt,[n(k,{class:"w-4 h-4"}),t("span",At,l(F(s.created_at)),1)]),t("div",Dt,[n(b,{to:"blog/"+s.post_id.replace(/^blog\//,""),class:"text-xs px-2 py-1 rounded-lg border transition-colors border-gray-200 hover:bg-gray-50 dark:border-[#ffffff15] dark:hover:bg-white/5"},{default:y(()=>e[10]||(e[10]=[p(" مشاهده پست ")])),_:2},1032,["to"])])]),t("p",Mt,l(s.content),1)]))),128))])):(o(),a("div",qt,[n(P,{class:"w-10 h-10 mb-2"}),e[12]||(e[12]=p(" نظری ثبت نکرده‌اید "))]))])])])}}};export{Tt as default};
